import{j as e,r as m,L as E,S as u}from"./app-CyxJLvEq.js";import{C as n}from"./card-BNIH3Pud.js";import{c as T,B as f}from"./button-CqV8ksUr.js";import{c as j}from"./utils-jAU0Cazi.js";import{S as I}from"./switch-CnN6dfTm.js";import{A as _}from"./arrow-left-jB_PJ20p.js";import{M as A,S as X}from"./sun-sNYqJswG.js";import{S as L}from"./smartphone-DKx7UiDU.js";import{C as M}from"./clock-BH8vRCkV.js";import{R as D}from"./refresh-cw-CB_M6hk-.js";import{C as y}from"./circle-check-big-DSPtIjYn.js";import{Q as V}from"./qr-code-qNvXTJy1.js";import{C as R}from"./copy-CbUrAze4.js";import{c as q}from"./createLucideIcon-BC5KCFBC.js";import"./index-C1-QZkgV.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],O=q("TriangleAlert",F),Q=T("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-background text-foreground",destructive:"text-destructive-foreground [&>svg]:text-current *:data-[slot=alert-description]:text-destructive-foreground/80"}},defaultVariants:{variant:"default"}});function z({className:a,variant:l,...d}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:j(Q({variant:l}),a),...d})}function B({className:a,...l}){return e.jsx("div",{"data-slot":"alert-description",className:j("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",a),...l})}const ne=({payment:a,pix_data:l,customer:d,instructions:N})=>{const[g,i]=m.useState(!1),[w,h]=m.useState(""),[c,v]=m.useState(!1),[p,b]=m.useState(!1),[s,C]=m.useState(!1);m.useEffect(()=>{s?(document.documentElement.classList.add("dark"),document.documentElement.style.setProperty("--dark-bg","#020818"),document.documentElement.style.setProperty("--dark-text","#ae9efd")):document.documentElement.classList.remove("dark")},[s]),m.useEffect(()=>{const r=()=>{const o=new Date().getTime(),x=new Date(a.expires_at).getTime()-o;if(x<0){v(!0),h("Expirado");return}const P=Math.floor(x%(1e3*60*60)/(1e3*60)),S=Math.floor(x%(1e3*60)/1e3);h(`${P}:${S.toString().padStart(2,"0")}`)};r();const t=setInterval(r,1e3);return()=>clearInterval(t)},[a.expires_at]);const $=async()=>{try{await navigator.clipboard.writeText(l.pix_code),i(!0),setTimeout(()=>i(!1),2e3)}catch{const t=document.createElement("textarea");t.value=l.pix_code,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),i(!0),setTimeout(()=>i(!1),2e3)}},k=async()=>{var r;b(!0);try{const o=await(await fetch("/purchase/pix/check-status",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((r=document.querySelector('meta[name="csrf-token"]'))==null?void 0:r.getAttribute("content"))||""},body:JSON.stringify({payment_id:a.payment_id})})).json();o.success&&o.status==="paid"?u.visit("/create-card",{preserveState:!1,replace:!0}):alert("Pagamento ainda não foi confirmado. Tente novamente em alguns minutos.")}catch{alert("Erro ao verificar pagamento. Tente novamente.")}finally{b(!1)}};return e.jsxs("div",{className:`min-h-screen py-6 sm:py-8 px-4 transition-all duration-300 ${s?"dark":""}`,style:s?{backgroundColor:"#020818",color:"#ae9efd"}:{backgroundColor:"#ffffff",color:"#1f2937"},children:[e.jsx(E,{title:"Pagamento PIX - DigitalCard"}),e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 sm:mb-8 gap-4",children:[e.jsxs("button",{onClick:()=>u.visit("/purchase"),className:`flex items-center gap-2 transition-colors ${s?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(_,{className:"w-4 h-4 sm:w-5 sm:h-5"}),e.jsx("span",{className:"text-sm sm:text-base",children:"Voltar"})]}),e.jsxs("div",{className:"text-center flex-1",children:[e.jsx("h1",{className:`text-xl sm:text-2xl lg:text-3xl font-bold ${s?"text-white":"text-gray-900"}`,children:"Pagamento PIX"}),e.jsxs("p",{className:`text-sm sm:text-base ${s?"text-gray-300":"text-gray-600"}`,children:["Plano ",a.plan_name," - ",a.formatted_amount]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(I,{checked:s,onCheckedChange:C,className:"data-[state=checked]:bg-purple-600"}),s?e.jsx(A,{className:"w-4 h-4"}):e.jsx(X,{className:"w-4 h-4"})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6 sm:gap-8",children:[e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs(n,{className:`p-4 sm:p-6 ${s?"bg-gray-900 border-gray-700":"bg-white"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 sm:mb-6",children:[e.jsx("div",{className:`w-8 h-8 sm:w-10 sm:h-10 rounded-full flex items-center justify-center ${s?"bg-blue-900/20":"bg-blue-100"}`,children:e.jsx(L,{className:"w-4 h-4 sm:w-5 sm:h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:`text-base sm:text-lg font-semibold ${s?"text-white":"text-gray-900"}`,children:"Como Pagar"}),e.jsx("p",{className:`text-xs sm:text-sm ${s?"text-gray-300":"text-gray-600"}`,children:"Siga as instruções abaixo"})]})]}),e.jsx("div",{className:"space-y-3",children:N.map((r,t)=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 rounded-full bg-blue-500 text-white text-xs sm:text-sm flex items-center justify-center flex-shrink-0 mt-0.5",children:t+1}),e.jsx("p",{className:`text-xs sm:text-sm lg:text-base ${s?"text-gray-300":"text-gray-700"}`,children:r})]},t))})]}),e.jsxs(z,{className:`${c?s?"border-red-700 bg-red-900/20":"border-red-200 bg-red-50":s?"border-yellow-700 bg-yellow-900/20":"border-yellow-200 bg-yellow-50"}`,children:[e.jsx(M,{className:`h-4 w-4 ${c?"text-red-600":"text-yellow-600"}`}),e.jsx(B,{className:`text-sm sm:text-base ${c?s?"text-red-300":"text-red-800":s?"text-yellow-300":"text-yellow-800"}`,children:c?e.jsx("span",{className:"font-medium",children:"⏰ PIX Expirado! Inicie um novo pagamento."}):e.jsxs("span",{children:[e.jsx("strong",{children:"Tempo restante:"})," ",w," para concluir o pagamento"]})})]}),e.jsxs(n,{className:`p-4 sm:p-6 ${s?"bg-gray-900 border-gray-700":"bg-white"}`,children:[e.jsx("h3",{className:`font-semibold mb-3 sm:mb-4 text-sm sm:text-base ${s?"text-white":"text-gray-900"}`,children:"Já fez o pagamento?"}),e.jsx("p",{className:`text-xs sm:text-sm mb-3 sm:mb-4 ${s?"text-gray-300":"text-gray-600"}`,children:"Clique no botão abaixo para verificar se seu pagamento foi confirmado"}),e.jsx(f,{onClick:k,disabled:p||c,className:"w-full py-3 sm:py-2",variant:"outline",children:p?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"w-4 h-4 mr-2 animate-spin"}),e.jsx("span",{className:"text-sm sm:text-base",children:"Verificando..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"text-sm sm:text-base",children:"Verificar Pagamento"})]})})]})]}),e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs(n,{className:`p-4 sm:p-6 text-center ${s?"bg-gray-900 border-gray-700":"bg-white"}`,children:[e.jsx("h2",{className:`text-base sm:text-lg font-semibold mb-3 sm:mb-4 ${s?"text-white":"text-gray-900"}`,children:"Escaneie o QR Code"}),e.jsxs("div",{className:`inline-block p-3 sm:p-4 rounded-lg border ${s?"bg-white border-gray-600":"bg-white border-gray-200"}`,children:[e.jsx("img",{src:l.qr_code_url,alt:"QR Code PIX",className:"w-32 h-32 sm:w-40 sm:h-40 lg:w-48 lg:h-48 mx-auto",onError:r=>{var t;r.currentTarget.style.display="none",(t=r.currentTarget.nextElementSibling)==null||t.classList.remove("hidden")}}),e.jsx("div",{className:"hidden w-32 h-32 sm:w-40 sm:h-40 lg:w-48 lg:h-48 bg-gray-100 flex items-center justify-center rounded",children:e.jsx(V,{className:"w-12 h-12 sm:w-16 sm:h-16 text-gray-400"})})]}),e.jsx("p",{className:`text-xs sm:text-sm mt-2 sm:mt-3 ${s?"text-gray-300":"text-gray-600"}`,children:"Abra seu app do banco e escaneie o código"})]}),e.jsxs(n,{className:`p-4 sm:p-6 ${s?"bg-gray-900 border-gray-700":"bg-white"}`,children:[e.jsx("h2",{className:`text-base sm:text-lg font-semibold mb-3 sm:mb-4 ${s?"text-white":"text-gray-900"}`,children:"Código PIX"}),e.jsx("p",{className:`text-xs sm:text-sm mb-3 ${s?"text-gray-300":"text-gray-600"}`,children:"Ou copie e cole o código no seu app do banco:"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:`p-3 sm:p-4 rounded-lg border-2 border-dashed mb-3 ${s?"bg-gray-800 border-gray-600":"bg-gray-50 border-gray-300"}`,children:e.jsx("code",{className:`text-xs sm:text-sm break-all font-mono ${s?"text-gray-200":"text-gray-800"}`,children:l.pix_code})}),e.jsx(f,{onClick:$,disabled:c,className:`w-full py-3 sm:py-2 ${g?"bg-green-600 hover:bg-green-700":""}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"text-sm sm:text-base",children:"Código Copiado!"})]}):e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"text-sm sm:text-base",children:"Copiar Código PIX"})]})})]})]}),e.jsxs(n,{className:`p-4 sm:p-6 ${s?"bg-gray-900 border-gray-700":"bg-white"}`,children:[e.jsx("h3",{className:`font-semibold mb-3 sm:mb-4 text-sm sm:text-base ${s?"text-white":"text-gray-900"}`,children:"Detalhes do Pagamento"}),e.jsxs("div",{className:"space-y-2 text-xs sm:text-sm",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:s?"text-gray-300":"text-gray-600",children:"Cliente:"}),e.jsx("span",{className:`font-medium break-all ml-2 ${s?"text-white":"text-gray-900"}`,children:d.name})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:s?"text-gray-300":"text-gray-600",children:"Plano:"}),e.jsx("span",{className:`font-medium ${s?"text-white":"text-gray-900"}`,children:a.plan_name})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:s?"text-gray-300":"text-gray-600",children:"Valor:"}),e.jsx("span",{className:"font-bold text-green-600",children:a.formatted_amount})]}),e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("span",{className:s?"text-gray-300":"text-gray-600",children:"ID Pagamento:"}),e.jsx("span",{className:`font-mono text-xs break-all ml-2 ${s?"text-gray-200":"text-gray-700"}`,children:a.payment_id})]})]})]})]})]}),e.jsx(n,{className:`mt-6 sm:mt-8 p-4 sm:p-6 ${s?"bg-blue-900/20 border-blue-700":"bg-blue-50 border-blue-200"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(O,{className:"w-4 h-4 sm:w-5 sm:h-5 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:`font-semibold mb-2 text-sm sm:text-base ${s?"text-blue-300":"text-blue-900"}`,children:"Precisa de Ajuda?"}),e.jsxs("div",{className:`text-xs sm:text-sm space-y-1 ${s?"text-blue-200":"text-blue-800"}`,children:[e.jsx("p",{children:"• O pagamento PIX é processado instantaneamente"}),e.jsx("p",{children:'• Após pagar, clique em "Verificar Pagamento"'}),e.jsxs("p",{className:"break-words",children:["• Em caso de problemas: ",e.jsx("strong",{children:"suporte@digitalcard.com.br"})]}),e.jsxs("p",{children:["• WhatsApp: ",e.jsx("strong",{children:"(11) 99999-9999"})]})]})]})]})})]})]})};export{ne as default};

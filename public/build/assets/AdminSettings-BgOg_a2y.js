import{r as d,a as C,j as e}from"./app-CyxJLvEq.js";import{C as g}from"./card-BNIH3Pud.js";import{B as w}from"./button-CqV8ksUr.js";import{I as y}from"./input-gOr3B0Id.js";import{L as o}from"./label-Ex64n5Y2.js";import{S as m}from"./switch-CnN6dfTm.js";import{A as S}from"./admin-layouts-C_-6wHD8.js";import{C as U}from"./circle-check-big-DSPtIjYn.js";import{S as B}from"./settings-D-KavAww.js";import{C as j}from"./circle-alert-BPfV-8nr.js";import{c as M}from"./createLucideIcon-BC5KCFBC.js";import{S as O}from"./shield-CF6SlGSV.js";import{P as I}from"./palette-DiMc2Qu9.js";import"./utils-jAU0Cazi.js";import"./index-fYyqQwJ9.js";import"./index-C1-QZkgV.js";import"./index-B2CxUIcs.js";import"./x-DL39Suzq.js";import"./credit-card-4iYNl23j.js";import"./chart-column-Cxs-ItVH.js";import"./AnimatedBackground-BHLy8l2X.js";import"./sun-sNYqJswG.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],q=M("Bell",P),de=()=>{const[r,x]=d.useState({platform_name:"",admin_email:"",base_url:"",email_notifications:!1,card_alerts:!1,analytics_reports:!1,two_factor:!1,auto_logout:!0,theme:"blue",dark_mode:!0}),[t,v]=d.useState({}),[A,b]=d.useState(!1),[N,k]=d.useState(!1),[_,E]=d.useState(!1),[f,u]=d.useState("");d.useEffect(()=>{b(!0),C.get("/settings").then(a=>{const s={platform_name:a.data.platform_name||"",admin_email:a.data.admin_email||"",base_url:a.data.base_url||"",email_notifications:a.data.email_notifications||!1,card_alerts:a.data.card_alerts||!1,analytics_reports:a.data.analytics_reports||!1,two_factor:a.data.two_factor||!1,auto_logout:a.data.auto_logout!==void 0?a.data.auto_logout:!0,theme:a.data.theme||"blue",dark_mode:a.data.dark_mode!==void 0?a.data.dark_mode:!0};x(s),b(!1)}).catch(a=>{b(!1),alert(`Erro!

Não foi possível carregar as configurações.
Tente recarregar a página.`)})},[]),d.useEffect(()=>{if(f){const a=setTimeout(()=>u(""),3e3);return()=>clearTimeout(a)}},[f]);const h=a=>{const{name:s,value:l}=a.target;x(i=>({...i,[s]:l})),t[s]&&v(i=>({...i,[s]:void 0}))},c=a=>{x(s=>({...s,[a]:!s[a]}))},L=()=>{const a={},s=r.platform_name||"";s.trim()?s.trim().length<2?a.platform_name="Nome da plataforma deve ter pelo menos 2 caracteres":s.trim().length>255&&(a.platform_name="Nome da plataforma deve ter no máximo 255 caracteres"):a.platform_name="Nome da plataforma é obrigatório";const l=r.admin_email||"";l.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.trim())?l.trim().length>255&&(a.admin_email="E-mail deve ter no máximo 255 caracteres"):a.admin_email="E-mail inválido":a.admin_email="E-mail do administrador é obrigatório";const i=r.base_url||"";if(!i.trim())a.base_url="URL base é obrigatória";else{try{const p=new URL(i.trim());["http:","https:"].includes(p.protocol)||(a.base_url="URL deve começar com http:// ou https://")}catch{a.base_url="URL inválida"}i.trim().length>255&&(a.base_url="URL deve ter no máximo 255 caracteres")}const n=r.theme||"";return["blue","purple","green","pink","orange"].includes(n)||(a.theme="Tema inválido"),v(a),Object.keys(a).length===0},T=async()=>{var a,s,l,i;if(u(""),!L()){const n=Object.values(t).filter(Boolean);alert(`Erro de Validação!

Por favor, corrija os seguintes erros:

• `+n.join(`
• `));return}k(!0);try{const n=await C.post("/settings/save",r);n.data.success?(u("Configurações salvas com sucesso!"),alert(`Sucesso!

Configurações salvas com sucesso!`)):alert(`Erro!

`+n.data.message)}catch(n){if(((a=n.response)==null?void 0:a.status)===422&&((l=(s=n.response)==null?void 0:s.data)!=null&&l.errors)){const R=n.response.data.errors,p=Object.values(R).flat();alert(`Erro de Validação!

• `+p.join(`
• `))}else((i=n.response)==null?void 0:i.status)===500?alert(`Erro do Servidor!

Tente novamente em alguns minutos.`):n.code==="NETWORK_ERROR"||!n.response?alert(`Erro de Conexão!

Verifique sua internet e tente novamente.`):alert(`Erro!

Tente novamente.`)}finally{k(!1)}},F=async()=>{var a;if(confirm(`Confirmação!

Tem certeza que deseja restaurar as configurações padrão?

Esta ação não pode ser desfeita.`)){E(!0),u("");try{const s=await C.post("/settings/reset");x(s.data),v({}),u("Configurações restauradas!"),alert(`Sucesso!

Configurações restauradas para os padrões!`)}catch(s){((a=s.response)==null?void 0:a.status)===500?alert(`Erro do Servidor!

Tente novamente em alguns minutos.`):s.code==="NETWORK_ERROR"||!s.response?alert(`Erro de Conexão!

Verifique sua internet e tente novamente.`):alert(`Erro!

Não foi possível restaurar as configurações.`)}finally{E(!1)}}};return A?e.jsx(S,{children:e.jsx("div",{className:"p-6 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Carregando configurações..."})]})})}):e.jsx(S,{children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent",children:"Configurações"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Configure as preferências e definições da plataforma"}),f&&e.jsxs("div",{className:"mt-4 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg flex items-center gap-2",children:[e.jsx(U,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-green-800 dark:text-green-200",children:f})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(g,{className:"material-card p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-r from-blue-500 to-cyan-500 flex items-center justify-center",children:e.jsx(B,{className:"w-5 h-5 text-white"})}),e.jsx("h3",{className:"text-lg font-semibold",children:"Configurações Gerais"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"platform_name",children:"Nome da Plataforma *"}),e.jsx(y,{name:"platform_name",value:r.platform_name,onChange:h,className:t.platform_name?"border-red-500 focus:border-red-500":"",placeholder:"Digite o nome da plataforma"}),t.platform_name&&e.jsxs("div",{className:"mt-1 flex items-center gap-1 text-red-600 text-sm",children:[e.jsx(j,{className:"w-4 h-4"}),t.platform_name]})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"admin_email",children:"E-mail do Administrador *"}),e.jsx(y,{name:"admin_email",type:"email",value:r.admin_email,onChange:h,className:t.admin_email?"border-red-500 focus:border-red-500":"",placeholder:"admin@exemplo.com"}),t.admin_email&&e.jsxs("div",{className:"mt-1 flex items-center gap-1 text-red-600 text-sm",children:[e.jsx(j,{className:"w-4 h-4"}),t.admin_email]})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"base_url",children:"URL Base *"}),e.jsx(y,{name:"base_url",value:r.base_url,onChange:h,className:t.base_url?"border-red-500 focus:border-red-500":"",placeholder:"https://seudominio.com.br"}),t.base_url&&e.jsxs("div",{className:"mt-1 flex items-center gap-1 text-red-600 text-sm",children:[e.jsx(j,{className:"w-4 h-4"}),t.base_url]})]})]})]}),e.jsxs(g,{className:"material-card p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center",children:e.jsx(q,{className:"w-5 h-5 text-white"})}),e.jsx("h3",{className:"text-lg font-semibold",children:"Notificações"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(o,{children:"Notificações por E-mail"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receber notificações por e-mail"})]}),e.jsx(m,{checked:r.email_notifications,onCheckedChange:()=>c("email_notifications")})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(o,{children:"Alertas de Criação de Cartão"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Notifique-se quando novos cartões forem criados"})]}),e.jsx(m,{checked:r.card_alerts,onCheckedChange:()=>c("card_alerts")})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(o,{children:"Relatórios Analíticos"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Resumo semanal de análises"})]}),e.jsx(m,{checked:r.analytics_reports,onCheckedChange:()=>c("analytics_reports")})]})]})]}),e.jsxs(g,{className:"material-card p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-r from-green-500 to-emerald-500 flex items-center justify-center",children:e.jsx(O,{className:"w-5 h-5 text-white"})}),e.jsx("h3",{className:"text-lg font-semibold",children:"Segurança"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(o,{children:"Autenticação em Dois Fatores"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ative 2FA para maior segurança"})]}),e.jsx(m,{checked:r.two_factor,onCheckedChange:()=>c("two_factor")})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(o,{children:"Logout Automático"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Desconectar automaticamente após inatividade"})]}),e.jsx(m,{checked:r.auto_logout,onCheckedChange:()=>c("auto_logout")})]}),e.jsx(w,{variant:"outline",className:"w-full",children:"Alterar Senha"})]})]}),e.jsxs(g,{className:"material-card p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-r from-orange-500 to-red-500 flex items-center justify-center",children:e.jsx(I,{className:"w-5 h-5 text-white"})}),e.jsx("h3",{className:"text-lg font-semibold",children:"Aparência"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(o,{children:"Tema Padrão do Cartão *"}),e.jsxs("select",{name:"theme",value:r.theme,onChange:h,className:`w-full mt-1 p-2 border rounded-md bg-background ${t.theme?"border-red-500":"border-input"}`,children:[e.jsx("option",{value:"blue",children:"Azul"}),e.jsx("option",{value:"purple",children:"Roxo"}),e.jsx("option",{value:"green",children:"Verde"}),e.jsx("option",{value:"pink",children:"Rosa"}),e.jsx("option",{value:"orange",children:"Laranja"})]}),t.theme&&e.jsxs("div",{className:"mt-1 flex items-center gap-1 text-red-600 text-sm",children:[e.jsx(j,{className:"w-4 h-4"}),t.theme]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(o,{children:"Modo Escuro"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Usar tema escuro no painel administrativo"})]}),e.jsx(m,{checked:r.dark_mode,onCheckedChange:()=>c("dark_mode")})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(w,{variant:"outline",onClick:F,disabled:_||N,children:_?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current mr-2"}),"Restaurando..."]}):"Restaurar Padrões"}),e.jsx(w,{className:"gradient-button",onClick:T,disabled:N||_,children:N?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current mr-2"}),"Salvando..."]}):"Salvar Alterações"})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsx("span",{className:"text-red-500",children:"*"})," Campos obrigatórios"]})]})})};export{de as default};
